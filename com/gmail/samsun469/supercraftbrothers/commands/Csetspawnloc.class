package com.gmail.samsun469.supercraftbrothers.commands;

import com.gmail.samsun469.supercraftbrothers.Lang;
import com.gmail.samsun469.supercraftbrothers.SCBGame;
import com.gmail.samsun469.supercraftbrothers.SCBMap;
import com.gmail.samsun469.supercraftbrothers.managers.ArenaManager;
import org.bukkit.command.CommandSender;
import org.bukkit.entity.Player;

public class Csetspawnloc
  extends ICommand
{
  public Csetspawnloc()
  {
    super("setspawnloc", "scb.setspawnloc", 2, true);
  }
  
  public void onCommand(CommandSender cs, String[] strings)
  {
    Player player = (Player)cs;
    int i = 0;
    try
    {
      i = Integer.parseInt(strings[1]);
    }
    catch (NumberFormatException ex)
    {
      cs.sendMessage(Lang.INVALID_NUMBER.getString(true).replace("%n", strings[1]));
    }
    if ((i > 0) && (i < 5))
    {
      String mapName = strings[0];
      if (ArenaManager.getGame(mapName) == null) {
        cs.sendMessage(Lang.MAP_NOT_FOUND.getString(true));
      }
      SCBMap map = ArenaManager.getGame(mapName).getMap();
      if (map == null) {
        cs.sendMessage(Lang.MAP_NOT_FOUND.getString(true));
      } else {
        switch (i)
        {
        case 1: 
          map.setLocation("spawn1", player.getLocation());
          break;
        case 2: 
          map.setLocation("spawn2", player.getLocation());
          break;
        case 3: 
          map.setLocation("spawn3", player.getLocation());
          break;
        case 4: 
          map.setLocation("spawn4", player.getLocation());
          break;
        default: 
          cs.sendMessage("[§aSCB§r] Wow. How the heck did you get this message? You're amazing. Please tell me how you did it.");
        }
      }
      cs.sendMessage("[§aSCB§r] Created spawnpoint " + i + " for map " + mapName);
    }
    else
    {
      cs.sendMessage(Lang.NUMBER_NOT_1_4.getString(true).replace("%n", strings[1]));
    }
  }
}
